# 법률 데이터 수집 가이드

## 개요

국가법령정보 Open API를 활용하여 근로계약서 분석에 필요한 법률 데이터를 자동으로 수집합니다.

## 수집 데이터 종류

1. **법령해석례** - 법령 해석 사례
2. **판례** - 법원 판결문
3. **고용노동부 법령해설** - 고용노동부의 법령 해설
4. **노동위원회 판정례** - 노동위원회 판정 사례

## 사전 준비

### 1. Open API 신청

1. [국가법령정보 공동활용](https://open.law.go.kr) 접속
2. 회원가입 및 로그인
3. API 신청 페이지에서 다음 API 신청:
   - 법령해석례
   - 판례
   - 고용노동부 법령해설
   - 노동위원회

### 2. 환경 변수 설정

`ai/.env` 파일 생성:

```bash
cd ai
cp .env.example .env
```

`.env` 파일에 사용자 ID 입력:

```
LEGAL_API_USER_ID=your_email_id
```

> 이메일이 `example@korea.kr`이면 `LEGAL_API_USER_ID=example`

### 3. 패키지 설치

```bash
cd ai
pip install -r requirements.txt
```

## 데이터 수집 실행

### 기본 실행

```bash
cd ai/preprocessing/legal
python 1_collect.py
```

### 수집되는 키워드

다음 키워드로 법률 데이터를 검색합니다:

- 근로계약
- 근로기준법
- 최저임금
- 퇴직금
- 해고
- 임금

### 수집 결과

수집된 데이터는 `ai/data/raw/api/` 디렉토리에 저장됩니다:

```
ai/data/raw/api/
├── interpretations_20251027.json    # 법령해석례
├── precedents_20251027.json         # 판례
├── labor_ministry_20251027.json     # 고용노동부 법령해설
└── labor_commission_20251027.json   # 노동위원회 판정례
```

## 데이터 구조

### 법령해석례 (interpretations)

```json
{
  "법령해석례일련번호": "12345",
  "안건명": "근로계약서 작성 의무에 관한 건",
  "안건번호": "12-0345",
  "질의기관명": "서울특별시",
  "회신기관명": "고용노동부",
  "회신일자": "20231215",
  "법령해석례상세링크": "http://...",
  "검색키워드": "근로계약",
  "수집일시": "2025-10-27T..."
}
```

### 판례 (precedents)

```json
{
  "판례일련번호": "67890",
  "사건명": "부당해고 등 구제재심판정 취소",
  "사건번호": "2023누12345",
  "선고일자": "20231220",
  "법원명": "서울고등법원",
  "사건종류명": "민사",
  "판결유형": "판결",
  "선고": "원고승",
  "판례상세링크": "http://...",
  "검색키워드": "해고",
  "수집일시": "2025-10-27T..."
}
```

### 고용노동부 법령해설 (labor_ministry)

```json
{
  "해설일련번호": "11111",
  "제목": "최저임금 적용 기준",
  "등록일자": "20231201",
  "해설내용링크": "http://...",
  "검색키워드": "최저임금",
  "수집일시": "2025-10-27T..."
}
```

### 노동위원회 판정례 (labor_commission)

```json
{
  "판정례일련번호": "22222",
  "사건명": "임금체불 구제신청",
  "접수번호": "서울2023부해1234",
  "판정일자": "20231218",
  "판정내용": "인용",
  "판정례상세링크": "http://...",
  "검색키워드": "임금",
  "수집일시": "2025-10-27T..."
}
```

## 수집 속도 및 제한사항

- **API 호출 제한**: 과도한 요청 방지를 위해 요청 간 0.3초 대기
- **페이지당 최대**: 100건
- **판례 최대 수집**: 키워드당 최대 1,000건 (10페이지)
- **예상 소요 시간**: 키워드 15개 기준 약 20-30분

## 수집 후 다음 단계

1. **데이터 전처리**: 수집된 JSON 데이터를 청킹
2. **임베딩 생성**: KURE-v1 모델로 임베딩
3. **Elasticsearch 인덱싱**: 검색 엔진에 색인
4. **RAG 통합**: Gemini 2.5와 통합하여 질의응답 시스템 구축

## 문제 해결

### API 키 오류

```
오류: LEGAL_API_USER_ID 환경 변수를 설정해주세요.
```

**해결**: `ai/.env` 파일에 올바른 사용자 ID 설정

### 검색 결과 없음

```
검색 결과 없음
```

**해결**: 정상 동작. 해당 키워드에 대한 데이터가 없는 경우

### API 요청 실패

```
API 요청 실패: HTTPError
```

**해결**:
- 네트워크 연결 확인
- API 승인 상태 확인
- 일시적 서버 오류일 수 있으므로 잠시 후 재시도

### 고용노동부/노동위원회 API 오류

```
API 요청 실패: Expecting value: line 1 column 1 (char 0)
```

**현황**: 현재 고용노동부 법령해설 및 노동위원회 판정례 API는 응답을 반환하지 않음

**가능한 원인**:
- API 승인이 완료되지 않았거나 별도 신청 필요
- target 파라미터 값이 변경되었을 가능성
- 해당 API가 일시적으로 중단되었을 가능성

**우회 방법**: 법령해석례와 판례만으로도 충분한 법률 데이터 확보 가능

## 참고 자료

- [국가법령정보 Open API 가이드](https://open.law.go.kr/LSO/openApi/guideList.do)
- [API 문의](mailto:lawmanager@korea.kr)
- 전화: 044-200-6786 (사용신청), 02-2109-6446 (이용문의)
